<div class="grid grid-cols-1 sm:grid-cols-4" *ngIf="weatherData">

  <!-- left container -->
  <div class="col-span-1 p-6 space-y-6">
    <div class="flex flex-row p-3 rounded-full space-x-2 items-center justify-between">
      <img class="size-4"[src]="'../../../assets/search-interface-symbol.png'" alt="Search Icon">
      <input class="focus:outline-none"type="text" placeholder="Search for places..." [(ngModel)]="Location" (keyup.enter)="getWeatherData()">
      <div class="size-8 bg-gray-200 hover:bg-gray-300 cursor-pointer rounded-full flex justify-center items-center">
        <img class="size-4 rounded-full"[src]="'../../../assets/focus.png'" alt="Location Icon">
      </div>
    </div>
    <img class="size-52"[src]="weatherData.current.condition.icon" alt="Weather Icon">
    <p class="font-normal text-6xl">{{ weatherData.current.temp_c }}째C</p>
    <div class="flex items-center space-x-1"> 
      <span>{{ weatherData.location.localtime | date:'EEEE' }},</span> 
      <span class="opacity-50">{{ weatherData.location.localtime | date:'h:mm a' }}</span> 
    </div>    
    <div class="border-t border-gray-300"></div>
    <div class="flex flex-row space-x-2 items-center">
      <img class="size-6"[src]="'../../../assets/cloud-icon.png'" alt="Cloud Icon">
      <p>{{ weatherData.current.condition.text }}</p>
    </div>
    <div class="flex flex-row space-x-2 items-center">
      <img class="size-6"[src]="'../../../assets/precipitation.png'" alt="Precipitation Icon">
      <p>Rain - {{ weatherData.current.humidity }}%</p>
    </div>
  </div>

  <!-- right container -->
  <div class="col-span-3 p-6 space-y-5">

    <!-- toggle button for hourly and weekly forecast -->
    <div class="flex space-x-4 mb-4 relative">
      <button class="py-2 text-gray-700 text-xl transition ease-in-out" (click)="showHourly = true; showWeekly = false;" [ngClass]="{'border-b-2 border-gray-500 font-bold': showHourly}" [ngStyle]="{'opacity': showHourly ? 1 : 0.5}">Today</button>
      <button class="py-2 text-gray-700 text-xl transition ease-in-out" (click)="showWeekly = true; showHourly = false;" [ngClass]="{'border-b-2 border-gray-500 font-bold': showWeekly}" [ngStyle]="{'opacity': showWeekly ? 1 : 0.5}">Week</button>
    </div>
    
    <!-- hourly forecast -->
    <div *ngIf="showHourly" class="flex flex-nowrap space-x-3 overflow-x-auto p-2 scrollbar-hide">
      <div class="flex flex-col grow items-center shadow-md rounded-lg p-4 transform transition duration-300 hover:scale-105" *ngFor="let hour of weatherData.forecast.forecastday[0]?.hour">
        <h3>{{ hour.time | date:'h a'}}</h3>
        <img [src]="hour.condition.icon" alt="Weather icon">
        <p>{{ hour.temp_c | number:'1.0-0'}}째</p>
      </div>
    </div>
    
    <!-- weekly forecast -->
    <div *ngIf="showWeekly" class="flex space-x-3 scrollbar-hide">
      <div class="flex flex-col grow items-center shadow-md rounded-lg p-4 transform transition duration-300 hover:scale-105" *ngFor="let forecast of weatherData.forecast.forecastday"> 
        <h3>{{ forecast.date | date:'EEE' }}</h3>
        <img [src]="forecast.day.condition.icon" alt="Weather Icon">
        <div class="flex flex-row space-x-1">
          <p>{{ forecast.day.maxtemp_c | number:'1.0-0'}}째</p>
          <p class="opacity-50">{{ forecast.day.mintemp_c | number:'1.0-0'}}째</p>
        </div>
      </div>
    </div>

    <!-- additional info for today's forecast-->
    <p class="font-bold text-xl">Today's Highlights</p>
    <div class="grid grid-cols-3 gap-4">

      <!-- UV Index -->
      <div class="shadow-md rounded-lg p-4 space-y-4 transform transition duration-300 hover:scale-105">        
        <p class="opacity-50">UV Index</p>
        <p class="text-5xl">{{ weatherData.current.uv }}</p>
      </div>
      
      <!-- Wind status -->
      <div class="shadow-md rounded-lg p-4 space-y-4 transform transition duration-300 hover:scale-105" >
        <p class="opacity-50">Wind Status</p>
        <div class="flex flex-row justify-between">
          <div class="flex flex-row space-x-1">
            <p class="text-5xl">{{ weatherData.current.wind_kph}}</p>
            <p class="text-2xl self-end">km/h</p>
          </div>
          <div>
            <img class="size-12"[src]="'../../../assets/wind-status.png'" alt="Wind Icon">
          </div>
        </div>
        <p class="text-2xl"> {{ weatherData.current.wind_dir }} </p>
      </div>
      
      <!-- sunrise and sunset -->
      <div class="shadow-md rounded-lg p-4 space-y-4 transform transition duration-300 hover:scale-105" *ngIf="weatherData.forecast.forecastday.length > 0">
        <p class="opacity-50">Sunrise & Sunset</p>
          <div class="flex flex-row space-x-2">
            <img class="size-12"[src]="'../../../assets/sunrise.png'" alt="Cloud Icon">
            <p class="text-lg self-center">{{ weatherData.forecast.forecastday.slice(0, 1)[0].astro.sunrise }}</p>
          </div>
          <div class="flex flex-row space-x-2">
            <img class="size-12"[src]="'../../../assets/sunset.png'" alt="Cloud Icon">
            <p class="text-lg self-center">{{ weatherData.forecast.forecastday.slice(0, 1)[0].astro.sunset }}</p>
          </div>
      </div>

      <!-- humidity percentage -->
      <div class="shadow-md rounded-lg p-4 space-y-4 transform transition duration-300 hover:scale-105" >
        <p class="opacity-50">Humidity</p>
        <div class="flex justify-between">
          <p class="text-5xl">{{ weatherData.current.humidity }}%</p>
          <div class="progress-bar-container">
            <div class="progress-bar-fill" [style.height.%]="humidity_value">
              <div class="progress-circle" [style.bottom.%]="humidity_value - 5"></div>
            </div>
          </div>  
        </div>
      </div>  

      <!-- Visibility -->
      <div class="shadow-md rounded-lg p-4 space-y-4 transform transition duration-300 hover:scale-105" >
        <P class="opacity-50">Visibility</P>
        <div class="flex flex-row">
          <p class="text-5xl">{{ weatherData.current.vis_km }}</p>
          <p class="text-2xl self-end">km</p>
        </div>
      </div>
      
      <!-- air quality index -->
      <div class="shadow-md rounded-lg p-4 space-y-4 transform transition duration-300 hover:scale-105" >
        <p class="opacity-50">Air Quality Index</p>
        <div class="flex justify-between">
          <p class="text-5xl">{{ weatherData.current.air_quality['us-epa-index'] }}</p>
          <div class="progress-bar-container">
            <div class="progress-bar-fill" [style.height.%]="aqi_value"></div>
            <div class="progress-circle" [style.bottom.%]="aqi_value * 10"></div>
          </div>  
        </div>
      </div>

    </div>

  </div>

</div>

